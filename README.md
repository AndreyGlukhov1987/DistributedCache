# DistributedCache
Кластер использует мастер сервер для инициализации. Необходимо указать в файле hosting.json. Если упадет, связь не потеряется, но новый не добавить. Переключение мастера на любой из серверов не сделано :(
Для примера, кластер может хранить до 100 значений, можно расширить изменив значение в классе кэша. Можно считать crc16 или же хранить по hash, но тогда нужен инструмент равномерного распределения кэша и мап где лежит каждый кэш.
Когда к мастеру подключается новый сервер, он делит место между серверами поровну. Например, если серверов 2, то 50 значений хранится на мастере и 50 на втором сервере, если 3 то 33, 33, 34 и тд, а также сообщает другим серверам о новом подключении.
Данные реплицируются со сдвигом в 1 сервер. Реплика мастера копируется на 2й сервер, реплика 2го на 3й, реплика последнего на мастер.
Для тестов сервера кластера запускаются на разных портах, которые указывается также hosting.json.
Данные восстанавливаются из лога, если запрос пришел на сервер, на котором должно лежать значение, а его не оказалось, то ищем на зеркале, если и там нет, то пытаемся проверить остальные сервера. В случае успеха копия восстанавливается.
Все сервера кластера имеют двухстороннюю связь.
Во фронт сервере, по идее, должен быть распределитель нагрузки или словарь, на каком сервере лежат определенные пары ключ-значение.
Связь серверов на основе SignalR
В кэша для Put есть заготовка, во фронте не доделано. Просто при append сохраняем, новое значение с ключом и операцией edit, при поднятии значение прочитает эту строку и изменит состояние.
